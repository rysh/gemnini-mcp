# Gemini MCP for Claude Code

Claude Codeã®ç”»åƒè§£ææ©Ÿèƒ½ã‚’å¼·åŒ–ã™ã‚‹Gemini CLIé€£æºMCPã‚µãƒ¼ãƒãƒ¼

## ğŸŒŸ æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Claude Codeã®ç”»åƒè§£ææ©Ÿèƒ½ã®åˆ¶é™ã‚’è£œå®Œã™ã‚‹ãŸã‚ã€Google Gemini CLIã®å¼·åŠ›ãªç”»åƒè§£ææ©Ÿèƒ½ã‚’Model Context Protocol (MCP)ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦çµ±åˆã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

- **é«˜ç²¾åº¦ç”»åƒåˆ†æ**: Gemini 2.5 Proã«ã‚ˆã‚‹è©³ç´°ãªç”»åƒå†…å®¹åˆ†æ
- **å¤šè¨€èªOCR**: æ—¥æœ¬èªãƒ»è‹±èªå¯¾å¿œã®æ–‡å­—èªè­˜
- **ãƒãƒƒãƒå‡¦ç†**: è¤‡æ•°ç”»åƒã®ä¸€æ‹¬åˆ†æãƒ»å‡¦ç†
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º**: EXIFæƒ…å ±ã€ç”»åƒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è©³ç´°å–å¾—
- **ç”»åƒåˆ†é¡ãƒ»ã‚¿ã‚°ä»˜ã‘**: AI ã«ã‚ˆã‚‹è‡ªå‹•ã‚«ãƒ†ã‚´ãƒªåˆ†é¡
- **é€éçš„çµ±åˆ**: Claude Codeå†…ã§è‡ªç„¶ã«åˆ©ç”¨å¯èƒ½

### ãƒ¡ãƒªãƒƒãƒˆ

- âœ… Claude Codeã®ç”»åƒè§£æç²¾åº¦ã‚’å¤§å¹…å‘ä¸Š
- âœ… 100ä¸‡ãƒˆãƒ¼ã‚¯ãƒ³ã®åºƒå¤§ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æ´»ç”¨
- âœ… æœ€æ–°Geminiãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹é«˜æ€§èƒ½åˆ†æ
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šå¯èƒ½ãªè©³ç´°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼
- âœ… Apache 2.0ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹

### å¯¾å¿œç’°å¢ƒ

- **Node.js**: 18ä»¥ä¸Š
- **Claude Code**: æœ€æ–°ç‰ˆ
- **Gemini CLI**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- **OS**: macOS, Linux, Windows

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

| é …ç›® | è¦ä»¶ |
|------|------|
| Node.js | >= 18.0.0 |
| Claude Code | æœ€æ–°ç‰ˆæ¨å¥¨ |
| Gemini CLI | @google-ai/generative-ai-cli |
| ãƒ¡ãƒ¢ãƒª | 512MBä»¥ä¸Šæ¨å¥¨ |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | 100MBä»¥ä¸Š |

## ğŸš€ ç‰¹å¾´

### é«˜åº¦ãªç”»åƒè§£æ
- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¤œå‡ºãƒ»èªè­˜
- ã‚·ãƒ¼ãƒ³ç†è§£ã¨èª¬æ˜ç”Ÿæˆ
- æ„Ÿæƒ…ãƒ»è¡¨æƒ…åˆ†æ
- ç”»åƒå“è³ªè©•ä¾¡

### æŸ”è»Ÿãªè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³
- ãƒ¢ãƒ‡ãƒ«é¸æŠ (Gemini 1.5 Pro/Flash, 2.5 Pro)
- åˆ†æè©³ç´°åº¦èª¿æ•´
- è¨€èªè¨­å®š (æ—¥æœ¬èª/è‹±èª/è‡ªå‹•)
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–è¨­å®š

### ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆ
- Claude Codeå†…ã§é€éçš„ã«å‹•ä½œ
- æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«å½±éŸ¿ãªã—
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰è‡ªå‹•å‡¦ç†

### å …ç‰¢ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **çµ±ä¸€è¨­å®šç®¡ç†**: ConfigManagerã«ã‚ˆã‚‹ä¸€å…ƒåŒ–ã•ã‚ŒãŸè¨­å®šåˆ¶å¾¡
- **å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ¨™æº–åŒ–
- **å‹å®‰å…¨æ€§**: TypeScript + Zodã«ã‚ˆã‚‹å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯
- **ãƒ†ã‚¹ãƒˆå“è³ª**: 100%æˆåŠŸã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

1. **Node.js 18ä»¥ä¸Š**ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
2. **Claude Code**ãŒæœ€æ–°ç‰ˆã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨
3. **Gemini CLI**ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

```bash
# Gemini CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx @google-ai/generative-ai-cli
```

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

#### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/yourusername/gemnini-mcp.git
cd gemnini-mcp
```

#### 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

#### 3. Gemini APIèªè¨¼

åˆå›èµ·å‹•æ™‚ã«ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãã€Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®èªè¨¼ãŒå¿…è¦ã§ã™ï¼š

```bash
npx @google-ai/generative-ai-cli --prompt "ãƒ†ã‚¹ãƒˆ"
```

#### 4. MCPè¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.mcp.json` ã‚’ä½œæˆï¼š

```json
{
  "mcpServers": {
    "gemini-image-analyzer": {
      "command": "npx",
      "args": ["tsx", "src/mcp-server.ts"],
      "env": {
        "GEMINI_MODEL": "gemini-2.5-pro",
        "MAX_IMAGE_SIZE": "10",
        "ANALYSIS_TIMEOUT": "30",
        "DEFAULT_LANGUAGE": "ja"
      }
    }
  }
}
```

#### 5. Claude Codeã«ç™»éŒ²

**miseã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼ˆæ¨å¥¨ï¼‰:**
```bash
mise run mcp:register
```

**Makefileã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ:**
```bash
make mcp-register
```

**æ‰‹å‹•ã§ç™»éŒ²ã™ã‚‹å ´åˆ:**
```bash
claude mcp add gemini-image-analyzer npx tsx src/mcp-server.ts
```

### å‹•ä½œç¢ºèª

Claude Codeã§ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ï¼š

```
ç”»åƒã‚’åˆ†æã—ã¦è©³ç´°ã‚’æ•™ãˆã¦
```

ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‹ã€ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã¨ã€Gemini CLIã«ã‚ˆã‚‹é«˜ç²¾åº¦åˆ†æãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

## ğŸ› ï¸ é–‹ç™ºç’°å¢ƒ

### æ¨å¥¨ãƒ„ãƒ¼ãƒ«

**miseï¼ˆæ¨å¥¨ï¼‰**
- ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºãƒ„ãƒ¼ãƒ«ç®¡ç†
- Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³è‡ªå‹•ç®¡ç†
- ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼çµ±åˆ

**Makefile**
- miseæœªå¯¾å¿œç’°å¢ƒã§ã®ä»£æ›¿æ‰‹æ®µ
- å¾“æ¥ã®makeã‚³ãƒãƒ³ãƒ‰ã§æ“ä½œ

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### Option 1: miseä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

1. **miseã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   # macOS (Homebrew)
   brew install mise
   
   # Linux/WSL
   curl https://mise.run | sh
   
   # ãã®ä»–ã®æ–¹æ³•: https://mise.jdx.dev/getting-started.html
   ```

2. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   ```bash
   cd gemnini-mcp
   mise install     # Node.jsè‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   mise run setup   # ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   ```

3. **é–‹ç™ºé–‹å§‹**
   ```bash
   mise run dev           # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
   mise run test:watch    # ãƒ†ã‚¹ãƒˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
   mise run check         # å…¨å“è³ªãƒã‚§ãƒƒã‚¯
   ```

#### Option 2: Makefileä½¿ç”¨

1. **Node.js 18+ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª**

2. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   ```bash
   cd gemnini-mcp
   make setup       # åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   ```

3. **é–‹ç™ºé–‹å§‹**
   ```bash
   make dev         # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
   make test-watch  # ãƒ†ã‚¹ãƒˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
   make check       # å…¨å“è³ªãƒã‚§ãƒƒã‚¯
   ```

### åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰

#### åŸºæœ¬é–‹ç™ºã‚¿ã‚¹ã‚¯

| mise | Makefile | èª¬æ˜ |
|------|----------|------|
| `mise run dev` | `make dev` | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• |
| `mise run test` | `make test` | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ |
| `mise run test:watch` | `make test-watch` | ãƒ†ã‚¹ãƒˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ |
| `mise run test:coverage` | `make test-coverage` | ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ |
| `mise run build` | `make build` | ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ |
| `mise run typecheck` | `make typecheck` | å‹ãƒã‚§ãƒƒã‚¯ |
| `mise run lint` | `make lint` | ãƒªãƒ³ãƒˆå®Ÿè¡Œ |
| `mise run lint:fix` | `make lint-fix` | ãƒªãƒ³ãƒˆè‡ªå‹•ä¿®æ­£ |

#### çµ±åˆãƒ»å“è³ªãƒã‚§ãƒƒã‚¯

| mise | Makefile | èª¬æ˜ |
|------|----------|------|
| `mise run check` | `make check` | å…¨å“è³ªãƒã‚§ãƒƒã‚¯ |
| `mise run ci` | `make ci` | CIç›¸å½“ã®ãƒã‚§ãƒƒã‚¯ |
| `mise run pre-commit` | `make pre-commit` | ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ |
| `mise run pre-push` | `make pre-push` | ãƒ—ãƒƒã‚·ãƒ¥å‰ãƒã‚§ãƒƒã‚¯ |

#### MCPé–¢é€£ã‚¿ã‚¹ã‚¯

| mise | Makefile | èª¬æ˜ |
|------|----------|------|
| `mise run mcp:register` | `make mcp-register` | Claude Codeã«ç™»éŒ² |
| `mise run mcp:unregister` | `make mcp-unregister` | Claude Codeã‹ã‚‰å‰Šé™¤ |
| `mise run mcp:list` | `make mcp-list` | ç™»éŒ²æ¸ˆã¿ã‚µãƒ¼ãƒãƒ¼ä¸€è¦§ |
| `mise run mcp:test` | `make mcp-test` | MCPã‚µãƒ¼ãƒãƒ¼ãƒ†ã‚¹ãƒˆ |

#### Geminié–¢é€£

| mise | Makefile | èª¬æ˜ |
|------|----------|------|
| `mise run gemini:auth` | `make gemini-auth` | Gemini CLIèªè¨¼ |
| `mise run gemini:test` | `make gemini-test` | Gemini CLIå‹•ä½œç¢ºèª |

#### ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆMakefileå°‚ç”¨ï¼‰

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|----------|------|
| `make q` | ã‚¯ã‚¤ãƒƒã‚¯å‹ãƒã‚§ãƒƒã‚¯ |
| `make t` | ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ |
| `make l` | ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ãƒˆ |
| `make c` | ã‚¯ã‚¤ãƒƒã‚¯å…¨ãƒã‚§ãƒƒã‚¯ |

### æ¨å¥¨é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. **æ©Ÿèƒ½é–‹ç™ºå‰**
   ```bash
   # miseä½¿ç”¨
   mise run typecheck && mise run test
   
   # Makefileä½¿ç”¨
   make q && make t
   ```

2. **é–‹ç™ºä¸­**
   ```bash
   # åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
   mise run test:watch  # ã¾ãŸã¯ make test-watch
   
   # ãƒ¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§é–‹ç™º
   mise run dev         # ã¾ãŸã¯ make dev
   ```

3. **ã‚³ãƒŸãƒƒãƒˆå‰**
   ```bash
   mise run pre-commit  # ã¾ãŸã¯ make pre-commit
   ```

4. **ãƒ—ãƒƒã‚·ãƒ¥å‰**
   ```bash
   mise run pre-push    # ã¾ãŸã¯ make pre-push
   ```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚³ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
src/
â”œâ”€â”€ mcp-server.ts          # MCPã‚µãƒ¼ãƒãƒ¼ãƒ¡ã‚¤ãƒ³
â”œâ”€â”€ gemini-client.ts       # Gemini CLIé€£æº
â”œâ”€â”€ types.ts               # å‹å®šç¾©
â”œâ”€â”€ config/
â”‚   â””â”€â”€ index.ts          # çµ±ä¸€è¨­å®šç®¡ç† (ConfigManager)
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ env.ts            # ç’°å¢ƒå¤‰æ•°èª­ã¿å–ã‚Š
â”‚   â”œâ”€â”€ error-handling.ts # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€
â”‚   â”œâ”€â”€ file.ts           # ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ image-validation.ts # ç”»åƒæ¤œè¨¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ constants/
    â””â”€â”€ defaults.ts       # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ä¸€å…ƒç®¡ç†
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ConfigManager (`src/config/index.ts`)
- **ç›®çš„**: è¨­å®šã®ä¸€å…ƒç®¡ç†ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **æ©Ÿèƒ½**: ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿ã€è¨­å®šæ¤œè¨¼ã€ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
- **ãƒ¡ãƒªãƒƒãƒˆ**: è¨­å®šå¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²ã‚’æœ€å°åŒ–

```typescript
import { getConfigManager } from './config/index.js';

const config = getConfigManager();
const maxSize = config.getMaxImageSizeBytes();
const timeout = config.getAnalysisTimeoutMs();
```

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° (`src/utils/error-handling.ts`)
- **çµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `createErrorResponse()`, `createSuccessResponse()`
- **ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼**: `createGeminiErrors.*` ã§ä¸€è²«ã—ãŸã‚¨ãƒ©ãƒ¼ç”Ÿæˆ
- **é«˜éšé–¢æ•°**: `withErrorHandling()` ã§ãƒ„ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ãƒ©ãƒƒãƒ—

#### ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ (`src/utils/file.ts`)
- **ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ã‚µã‚¤ã‚ºã€å½¢å¼ã€å­˜åœ¨ç¢ºèª
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º**: å®‰å…¨ãªç”»åƒæƒ…å ±å–å¾—
- **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ“ä½œ**: ãƒãƒƒãƒå‡¦ç†ç”¨ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢

#### ç”»åƒæ¤œè¨¼ (`src/utils/image-validation.ts`)
- **å“è³ªè©•ä¾¡**: ç”»åƒã®é©æ€§è‡ªå‹•åˆ¤å®š
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹äºˆæ¸¬**: å‡¦ç†æ™‚é–“è¦‹ç©ã‚‚ã‚Š
- **æ¨å¥¨è¨­å®š**: æœ€é©åŒ–ææ¡ˆã®è‡ªå‹•ç”Ÿæˆ

### è¨­è¨ˆåŸå‰‡

1. **é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°**: å‰¯ä½œç”¨ã‚’æœ€å°é™ã«æŠ‘åˆ¶
2. **å˜ä¸€è²¬ä»»åŸå‰‡**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ˜ç¢ºãªå½¹å‰²ã‚’æŒã¤
3. **å‹å®‰å…¨æ€§**: TypeScript + Zodã§å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯
4. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„æ§‹é€ 
5. **ä¿å®ˆæ€§**: è¨­å®šå¤‰æ›´ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ›´æ–°ã«å¼·ã„è¨­è¨ˆ

## âš™ï¸ è©³ç´°è¨­å®š

### Geminiãƒ¢ãƒ‡ãƒ«è¨­å®š

åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã¨ç‰¹å¾´ï¼š

| ãƒ¢ãƒ‡ãƒ« | ç‰¹å¾´ | ç”¨é€” | é€Ÿåº¦ | ã‚³ã‚¹ãƒˆ |
|--------|------|------|------|--------|
| gemini-2.5-pro | æœ€é«˜ç²¾åº¦ | è©³ç´°åˆ†æãƒ»ç ”ç©¶ç”¨ | ä¸­ | é«˜ |
| gemini-2.0-flash-exp | ãƒãƒ©ãƒ³ã‚¹å‹ | ä¸€èˆ¬ç”¨é€” | é«˜ | ä¸­ |
| gemini-1.5-pro | å®‰å®šç‰ˆ | æœ¬ç•ªç’°å¢ƒ | ä¸­ | ä¸­ |
| gemini-1.5-flash | é«˜é€Ÿ | å¤§é‡å‡¦ç† | æœ€é«˜ | ä½ |

### ç’°å¢ƒå¤‰æ•°è¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã•ã‚Œã‚‹ç’°å¢ƒå¤‰æ•°ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼š

#### Geminiè¨­å®š
```bash
export GEMINI_MODEL="gemini-2.5-pro"          # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: gemini-2.5-pro
export GEMINI_TEMPERATURE="0.7"               # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.7
export GEMINI_MAX_TOKENS="2048"               # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2048
export GEMINI_LANGUAGE="ja"                   # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ja
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š
```bash
export MAX_IMAGE_SIZE="10"                    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 10 (MB)
export ANALYSIS_TIMEOUT="30"                  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30 (ç§’)
export MAX_CONCURRENT_REQUESTS="3"            # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3
export DEFAULT_LANGUAGE="ja"                  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ja
```

#### è¨­å®šç®¡ç†ã®ç‰¹å¾´
- **è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ä¸æ­£ãªå€¤ã¯è­¦å‘Šã¨å…±ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨
- **å‹å®‰å…¨æ€§**: æ•°å€¤ãƒ»åˆ—æŒ™å‹ã®å³å¯†ãƒã‚§ãƒƒã‚¯
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**: å…¨è¨­å®šã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’æä¾›
- **å‹•çš„æ›´æ–°**: å®Ÿè¡Œæ™‚è¨­å®šå¤‰æ›´ã‚’ã‚µãƒãƒ¼ãƒˆ

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼è©³ç´°è¨­å®š

#### åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼

```typescript
interface GeminiAnalysisConfig {
  model: string;           // ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«
  temperature: number;     // 0.0-1.0 (å‰µé€ æ€§ãƒ¬ãƒ™ãƒ«)
  maxOutputTokens: number; // æœ€å¤§å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
  language: string;        // å‡ºåŠ›è¨€èª ('ja', 'en', 'auto')
}
```

#### ç”»åƒè§£æã‚ªãƒ—ã‚·ãƒ§ãƒ³

```typescript
interface ImageAnalysisOptions {
  analysisType: 'describe' | 'ocr' | 'classify' | 'detect_objects';
  detailLevel: 'brief' | 'standard' | 'detailed';
  includeConfidence: boolean;    // ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢å«ã‚ã‚‹
  extractColors: boolean;        // è‰²æƒ…å ±æŠ½å‡º
  detectFaces: boolean;          // é¡”æ¤œå‡º
  readQRCodes: boolean;          // QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Š
  includeMetadata: boolean;      // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å«ã‚ã‚‹
}
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š

```typescript
interface PerformanceConfig {
  maxImageSize: number;      // MBå˜ä½
  maxBatchSize: number;      // ä¸€åº¦ã«å‡¦ç†ã™ã‚‹ç”»åƒæ•°
  parallelProcessing: boolean;
  analysisTimeout: number;   // ç§’å˜ä½
  cacheResults: boolean;     // çµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥
}
```

## ğŸ“– ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªç”»åƒåˆ†æ

```typescript
// Claude Codeã§ã®ä½¿ç”¨ä¾‹
"ã“ã®ç”»åƒã«ä½•ãŒå†™ã£ã¦ã„ã‚‹ã‹è©³ã—ãæ•™ãˆã¦"
```

è‡ªå‹•çš„ã«ä»¥ä¸‹ã®ã‚ˆã†ãªMCPãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼š

```json
{
  "tool": "analyze_image_with_gemini",
  "parameters": {
    "image_path": "/path/to/image.jpg",
    "analysis_type": "describe",
    "detail_level": "detailed",
    "language": "ja"
  }
}
```

### OCRï¼ˆæ–‡å­—èªè­˜ï¼‰

```typescript
"ã“ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‹ã‚‰æ–‡å­—ã‚’æŠ½å‡ºã—ã¦"
```

### ãƒãƒƒãƒå‡¦ç†

```typescript
"ãƒ•ã‚©ãƒ«ãƒ€å†…ã®å…¨ç”»åƒã‚’åˆ†æã—ã¦åˆ†é¡ã—ã¦"
```

### ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã§ã®åˆ†æ

```typescript
"é«˜ç²¾åº¦ãƒ¢ãƒ‡ãƒ«ã§è‹±èªã§åˆ†æã—ã¦ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚ã¦"
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. Gemini CLIèªè¨¼ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `Authentication failed` ã‚¨ãƒ©ãƒ¼

**è§£æ±ºæ–¹æ³•**:
```bash
# èªè¨¼æƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆ
rm -rf ~/.config/@google-ai/generative-ai-cli
npx @google-ai/generative-ai-cli --prompt "ãƒ†ã‚¹ãƒˆ"
```

#### 2. MCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: Claude Codeã§MCPãƒ„ãƒ¼ãƒ«ãŒåˆ©ç”¨ã§ããªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# MCPè¨­å®šç¢ºèª
claude mcp list

# ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
claude mcp remove gemini-image-analyzer
claude mcp add gemini-image-analyzer npx tsx src/mcp-server.ts
```

#### 3. ç”»åƒã‚µã‚¤ã‚ºã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `Image too large` ã‚¨ãƒ©ãƒ¼

**è§£æ±ºæ–¹æ³•**:
- ç’°å¢ƒå¤‰æ•°ã§æœ€å¤§ã‚µã‚¤ã‚ºã‚’å¢—åŠ : `export MAX_IMAGE_SIZE=20`
- ç”»åƒã‚’äº‹å‰ãƒªã‚µã‚¤ã‚ºã—ã¦ã‹ã‚‰åˆ†æ

#### 4. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: åˆ†æãŒé€”ä¸­ã§æ­¢ã¾ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’å»¶é•·
export ANALYSIS_TIMEOUT=60
```

#### 5. æ—¥æœ¬èªå‡ºåŠ›ãŒæ–‡å­—åŒ–ã‘

**ç—‡çŠ¶**: æ—¥æœ¬èªãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# è¨€èªè¨­å®šã‚’æ˜ç¤ºçš„ã«æŒ‡å®š
export GEMINI_LANGUAGE=ja
export LANG=ja_JP.UTF-8
```

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

#### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š

```bash
# è©³ç´°ãƒ­ã‚°ã‚’æœ‰åŠ¹åŒ–
export DEBUG=gemini-mcp:*
export LOG_LEVEL=debug
```

#### æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

```bash
# Gemini CLIç›´æ¥ãƒ†ã‚¹ãƒˆ
npx @google-ai/generative-ai-cli --prompt "ç”»åƒã‚’åˆ†æ" --file path/to/image.jpg

# MCPã‚µãƒ¼ãƒãƒ¼å˜ä½“ãƒ†ã‚¹ãƒˆ
npx tsx src/mcp-server.ts --test
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡å‰Šæ¸›

```bash
# Node.jsãƒ¡ãƒ¢ãƒªåˆ¶é™
export NODE_OPTIONS="--max-old-space-size=2048"
```

#### ãƒãƒƒãƒå‡¦ç†æœ€é©åŒ–

```typescript
// ä¸¦è¡Œå‡¦ç†æ•°ã‚’èª¿æ•´
export MAX_CONCURRENT_REQUESTS=3
export BATCH_SIZE=5
```

## ğŸ“š APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«

#### 1. `analyze_image_with_gemini`

**èª¬æ˜**: å˜ä¸€ç”»åƒã®è©³ç´°åˆ†æ

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
| åå‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------|----|----|------|
| `image_path` | string | âœ… | ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ |
| `analysis_type` | enum | âŒ | åˆ†æã‚¿ã‚¤ãƒ— (`describe`, `ocr`, `classify`, `detect_objects`) |
| `detail_level` | enum | âŒ | è©³ç´°åº¦ (`brief`, `standard`, `detailed`) |
| `language` | string | âŒ | å‡ºåŠ›è¨€èª (`ja`, `en`, `auto`) |
| `model` | string | âŒ | ä½¿ç”¨ãƒ¢ãƒ‡ãƒ« |
| `temperature` | number | âŒ | å‰µé€ æ€§ãƒ¬ãƒ™ãƒ« (0.0-1.0) |

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
interface AnalysisResult {
  description: string;          // ç”»åƒèª¬æ˜
  objects: string[];           // æ¤œå‡ºã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  text: string;               // OCRçµæœ
  metadata: ImageMetadata;     // ç”»åƒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  confidence: number;          // ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢
  colors: ColorInfo[];        // ä¸»è¦è‰²æƒ…å ±
}
```

#### 2. `batch_process_images`

**èª¬æ˜**: è¤‡æ•°ç”»åƒã®ä¸€æ‹¬å‡¦ç†

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
| åå‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------|----|----|------|
| `directory_path` | string | âœ… | ç”»åƒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ |
| `file_pattern` | string | âŒ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ (ä¾‹: `*.jpg`) |
| `analysis_options` | object | âŒ | åˆ†æã‚ªãƒ—ã‚·ãƒ§ãƒ³ |
| `max_files` | number | âŒ | æœ€å¤§å‡¦ç†ãƒ•ã‚¡ã‚¤ãƒ«æ•° |

#### 3. `configure_gemini_settings`

**èª¬æ˜**: Geminiè¨­å®šã®å‹•çš„å¤‰æ›´

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
| åå‰ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------|----|----|------|
| `model` | string | âŒ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ« |
| `temperature` | number | âŒ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¸©åº¦ |
| `language` | string | âŒ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èª |
| `max_tokens` | number | âŒ | æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•° |

### ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰

| ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ | å¯¾å‡¦æ³• |
|--------|------|--------|
| `GEMINI_AUTH_ERROR` | èªè¨¼å¤±æ•— | èªè¨¼æƒ…å ±ã‚’å†è¨­å®š |
| `IMAGE_TOO_LARGE` | ç”»åƒã‚µã‚¤ã‚ºè¶…é | ç”»åƒã‚’åœ§ç¸®ã¾ãŸã¯ã‚µã‚¤ã‚ºåˆ¶é™ã‚’å¢—åŠ  |
| `ANALYSIS_TIMEOUT` | åˆ†æã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’å»¶é•· |
| `INVALID_IMAGE_FORMAT` | éå¯¾å¿œå½¢å¼ | å¯¾å¿œå½¢å¼ã«å¤‰æ› |
| `RATE_LIMIT_EXCEEDED` | ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¶…é | å¾…æ©Ÿã—ã¦ã‹ã‚‰å†è©¦è¡Œ |

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯å¾Œ
git clone https://github.com/yourusername/gemnini-mcp.git
cd gemnini-mcp

# é–‹ç™ºä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# å‹ãƒã‚§ãƒƒã‚¯
npm run typecheck

# ãƒªãƒ³ãƒˆå®Ÿè¡Œ
npm run lint
```

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

1. æ©Ÿèƒ½è¿½åŠ å‰ã«Issueã§ç›¸è«‡
2. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ 
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°
4. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ˜ç¢ºã«è¨˜è¿°
5. æ‹¡å¼µTDD (Redâ†’Greenâ†’Refactorâ†’Documentâ†’Commit) ã«å¾“ã†

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Apache License 2.0 - è©³ç´°ã¯ [LICENSE](LICENSE) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

ğŸš€ **Claude Codeã®ç”»åƒè§£æèƒ½åŠ›ã‚’æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸ï¼**

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€[Issues](https://github.com/yourusername/gemnini-mcp/issues) ã§ãŠæ°—è»½ã«ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚